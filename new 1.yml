Target hosts

#####
1.) ec2

  ssh -i keypair.pem ubuntu@3.239.83.231
 useradd ansadmin
 passwd ansadmin

mkdir /home/ansadmin
chown -R ansadmin /home/ansadmin
chgrp -R ansadmin /home/ansadmin

su - ansadmin
mkdir .ssh
vim ~/.ssh/authorized_keys
###<Add public key>
-rw-rw-r-- 1 ansadmin ansadmin  574 Dec 19 10:20 authorized_keys

ubuntu@ip-172-31-76-52:~$ exit
logout

##Test:
ssh -i <our private key > ansadmin@3.239.83.231

ansadmin@ip-172-31-76-52:~$ echo $USER
ansadmin
ansadmin@ip-172-31-76-52:~$ hostname
ip-172-31-76-52


Docker Container:

docker run --name target-host -p 2525:22   -v /sys/fs/cgroup:/sys/fs/cgroup:ro   --privileged   -d abdennour/rhel:8-ssh


useradd ansadmin
 passwd ansadmin

mkdir /home/ansadmin/.ssh
cd /home/ansadmin/.ssh
 vi authorized_keys     ### add public key
 chown -R  ansadmin /home/ansadmin
 chgrp  -R  ansadmin /home/ansadmin
 chmod 700 /home/ansadmin/.ssh
 chmod 600 /home/ansadmin/.ssh/authorized_keys 



Test:
ssh ansadmin@localhost -p 2525
[ansadmin@41d96da693f3 ~]$ 

---> Install Ansible 

pip3
python3

pip   apt-get yum  brew


--->6

##ssh -i ~/.ssh/id_rsa  ansadmin@localhost -p 2525

container ansible_host=localhost  ansible_private_key_file=/home/awsdevops/.ssh/id_rsa  ansible_ssh_user=ansadmin ansible_ssh_port=2525

---> 7  Ansible module

mkdir-- creae dir
touch  -- create file
yum instal/apt-get  --install pkg

To connect to systes, we use module ping
-m file ---> create file/dir
-m pkg ---> to install pkg  module 
-m copy ---> fcop from control m/c to target host

ansible_doc --list 
##     /^file    ---> starting with file keyword
        q--- quit
ansible-doc  file












